<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Contador de Seguidores</title>

  <style>
    body {
      margin: 0;
      height: 100vh;
      background: #000;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: Arial, Helvetica, sans-serif;
    }

    #counter {
      font-size: 6rem;
      font-weight: bold;
      letter-spacing: 2px;
    }

    .label {
      position: absolute;
      top: 20px;
      font-size: 1rem;
      opacity: 0.6;
    }
  </style>
</head>
<body>

  <div class="label">Seguidores en Instagram</div>
  <div id="counter">0</div>

  <script>
    // ===== CONFIGURACIÓN =====
    const START_FOLLOWERS = 5549;

    // ===== CARGAR DATOS GUARDADOS =====
    let followers = parseInt(localStorage.getItem("followers")) || START_FOLLOWERS;
    let buffer = parseFloat(localStorage.getItem("buffer")) || 0;
    let lastTime = parseInt(localStorage.getItem("lastTime")) || Date.now();

    const counter = document.getElementById("counter");

    // ===== RITMO SEGÚN HORARIO HUMANO =====
    function rateByHour(hour) {
      if (hour >= 9 && hour < 22) return 0.0015;   // 9:00 AM – 10:00 PM (fuerte)
      if (hour >= 22 || hour < 1) return 0.0010;  // 10:01 PM – 1:00 AM (lento)
      return 0.00014;                             // 1:01 AM – 8:59 AM (súper lento)
    }

    function updateCounter() {
      counter.textContent = followers.toLocaleString();
    }

    // ===== RECUPERAR CRECIMIENTO SI LA PÁGINA ESTUVO CERRADA =====
    function catchUp() {
      const now = Date.now();
      const secondsPassed = Math.floor((now - lastTime) / 1000);

      for (let i = 0; i < secondsPassed; i++) {
        const hour = new Date(lastTime + i * 1000).getHours();
        buffer += rateByHour(hour);

        if (buffer >= 1) {
          followers += 1;
          buffer -= 1;
        }
      }

      lastTime = now;
    }

    // ===== LOOP EN TIEMPO REAL =====
    setInterval(() => {
      const now = new Date();
      buffer += rateByHour(now.getHours());

      if (buffer >= 1) {
        followers += 1;
        buffer -= 1;
        updateCounter();
      }

      localStorage.setItem("followers", followers);
      localStorage.setItem("buffer", buffer);
      localStorage.setItem("lastTime", Date.now());

    }, 1000);

    // ===== INIT =====
    catchUp();
    updateCounter();
  </script>

</body>
</html>
